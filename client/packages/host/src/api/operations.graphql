fragment SyncSettings on SyncSettingsNode {
  __typename
  intervalSeconds
  url
  username
}

query syncSettings {
  syncSettings {
    ...SyncSettings
  }
}

query initialisationStatus {
  initialisationStatus
}

fragment SyncErrors on SyncErrorInterface {
  __typename
  description
  fullError
  ... on MappedSyncError {
    __typename
    errorVariant
  }
  ... on UnknownSyncError {
    __typename
  }
}

mutation initialiseSite($syncSettings: SyncSettingsInput!) {
  initialiseSite(input: $syncSettings) {
    __typename
    ... on SyncSettingsNode {
      ...SyncSettings
    }
    ... on SetSyncSettingErrorNode {
      error {
        ...SyncErrors
      }
    }
  }
}

mutation updateSyncSettings($syncSettings: SyncSettingsInput!) {
  updateSyncSettings(input: $syncSettings) {
    __typename
    ... on SyncSettingsNode {
      ...SyncSettings
    }
    ... on SetSyncSettingErrorNode {
      error {
        ...SyncErrors
      }
    }
  }
}

fragment SyncStatus on SyncStatusNode {
  __typename
  finished
  started
}

fragment SyncStatusWithProgress on SyncStatusWithProgressNode {
  __typename
  finished
  started
  doneProgress
  totalProgress
}

query syncStatus {
  latestSyncStatus {
    error {
      ...SyncErrors
    }
    integration {
      ...SyncStatus
    }
    isSyncing
    prepareInitial {
      ...SyncStatus
    }
    pullCentral {
      ...SyncStatusWithProgress
    }
    pullRemote {
      ...SyncStatusWithProgress
    }
    push {
      ...SyncStatusWithProgress
    }
    summary {
      ...SyncStatus
    }
  }
}

mutation manualSync {
  manualSync
}
