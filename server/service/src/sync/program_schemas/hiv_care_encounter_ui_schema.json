{
  "type": "Categorization",
  "omSupply": {
    "some": "extra",
    "data": 1
  },
  "elements": [
    {
      "type": "Category",
      "label": "Physical Exam",
      "options": { "icon": "stethoscope" },
      "elements": [
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/height",
          "options": { "width": "100px" }
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/midUpperArmCircumference",
          "options": { "width": "100px" }
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/weight",
          "options": { "width": "100px" }
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/bloodPressure",
          "options": { "width": "100px" }
        },
        {
          "type": "BMI",
          "scope": "#/properties/physicalExamination/properties",
          "label": "Body Mass Index (BMI)"
        },
        {
          "type": "Group",
          "label": "Nutrition",
          "elements": [
            {
              "type": "Control",
              "label": "Nutritional Status:",
              "scope": "#/properties/physicalExamination/properties/nutrition/properties/nutritionalStatus",
              "options": {
                "show": [
                  ["UNDER_NOURISHED", "Under nourished"],
                  ["WELL_NOURISHED", "Well nourished"],
                  ["OVERWEIGHT", "Overweight"]
                ]
              }
            },
            {
              "type": "Control",
              "label": "Nutritional Support Needed:",
              "scope": "#/properties/physicalExamination/properties/nutrition/properties/nutritionalSupportNeeded"
            }
          ]
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/symptoms"
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/opportunisticInfections"
        },
        {
          "type": "Control",
          "label": "WHO Staging:",
          "scope": "#/properties/physicalExamination/properties/whoStaging",
          "options": {
            "show": [
              ["STAGE_1_ASYMPTOMATIC", "Stage 1 - Asymptomatic"],
              ["STAGE_2_MILDLY_SYMPTOMATIC", "Stage 2 - Mildly symptomatic"],
              [
                "STAGE_3_MODERATELY_SYMPTOMATIC",
                "Stage 3 - Moderately symptomatic"
              ],
              ["STAGE_4_SEVERELY_SYMPTOMATIC", "Stage 4 - Severely symptomatic"]
            ]
          }
        },
        {
          "type": "VerticalLayout",
          "elements": [
            {
              "type": "EncounterLineChart",
              "scope": "#",
              "options": {
                "values": [
                  {
                    "field": "physicalExamination.weight",
                    "label": "Weight",
                    "unit": "kg"
                  }
                ]
              }
            },
            {
              "type": "EncounterLineChart",
              "scope": "#",
              "options": {
                "values": [
                  {
                    "field": "physicalExamination.bloodPressure",
                    "label": "Blood Pressure",
                    "unit": "mmHg"
                  }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "type": "Category",
      "label": "ARV / Medication",
      "options": { "icon": "medicine" },
      "elements": [
        {
          "scope": "#/properties/arvMedication/properties/quantityPrescribed",
          "type": "PreviousEncounterField",
          "label": "Pill Count after last Visit"
        },
        {
          "scope": "#/properties/arvMedication/properties/remainingPillCount",
          "type": "Control",
          "label": "Pill Count before Visit"
        },
        {
          "scope": "#",
          "type": "AdherenceStatus",
          "label": "Adherence Status",
          "options": {
            "previousCountField": "arvMedication.quantityPrescribed",
            "remainingCountField": "arvMedication.remainingPillCount",
            "countPerDay": 1,
            "targetField": "arvMedication.adherenceStatus"
          }
        },
        {
          "type": "EncounterLineChart",
          "scope": "#",
          "options": {
            "values": [
              {
                "field": "arvMedication.adherenceStatus",
                "label": "Adherence Status",
                "unit": "%"
              }
            ]
          }
        },
        {
          "type": "QuantityPrescribed",
          "scope": "#",
          "label": "Pill Count after Visit",
          "options": {
            "quantityPerDay": 1,
            "baseDatetimeField": "startDatetime",
            "quantityPrescribedField": "arvMedication.quantityPrescribed",
            "endOfSupplyField": "arvMedication.endOfSupply"
          }
        },
        {
          "scope": "#/properties/arvMedication/properties/regimen",
          "type": "PreviousEncounterField",
          "label": "Current ARV Regimen"
        },
        {
          "scope": "#/properties/arvMedication/properties/regimenStatus",
          "label": "Regimen Status:",
          "type": "Control",
          "options": {
            "show": [
              ["NO", "No ARV"],
              ["START", "Start ARV"],
              ["CONTINUE", "Continue ARV"],
              ["CHANGE", "Changes to ARV Regimen"],
              ["STOP", "Stop ARV"]
            ]
          }
        },
        {
          "type": "Group",
          "elements": [
            {
              "scope": "#/properties/arvMedication/properties/regimen",
              "type": "Control",
              "label": "ARV Regimen:"
            },
            {
              "scope": "#/properties/arvMedication/properties/regimenChangeReason",
              "label": "Regimen Change Reason:",
              "type": "Control",
              "options": {
                "multiColumn": true,
                "show": [
                  ["51", "51", "Patient does not fulfill criteria"],
                  [
                    "52",
                    "52",
                    "Patient fulfils criteria, but counseling for ARVs is ongoing"
                  ],
                  [
                    "53",
                    "53",
                    "Patient fulfils criteria, but no ARVs available"
                  ],
                  [
                    "54",
                    "54",
                    "Patient fulfils criteria, but is not willing to start"
                  ],
                  [
                    "55",
                    "55",
                    "Patient fulfils criteria, but is on TB treatment"
                  ],
                  [
                    "56",
                    "56",
                    "Patient fulfils criteria but does not start for other reason"
                  ],
                  [
                    "57",
                    "57",
                    "Patient fulfills criteria, but awaits lab results"
                  ],
                  [
                    "58",
                    "58",
                    "Fulfills criteria but has OI and is too sick to start"
                  ],
                  [
                    "99",
                    "99",
                    "Patient fulfils criteria but does not start for other reason"
                  ],
                  ["101", "101", "Adult CD4 < 200"],
                  ["102", "102", "Adult WHO Stage IV"],
                  ["103", "103", "Adult WHO Stage III, if CD4 < 350"],
                  ["104", "104", "Children Pediatric WHO Stage III"],
                  ["105", "105", "Children > 18 months, CD4% < 15%"],
                  ["106", "106", "Infants < 18 months CD4% < 20%"],
                  ["107", "107", "Pregnant women for PMCT (plus)"],
                  ["108", "108", "Other reason to start"],
                  ["109", "109", "Test and Treat"],
                  ["110", "110", "Start TB treatment"],
                  ["111", "111", "Nausea / vomiting"],
                  ["112", "112", "Diarrhoea"],
                  ["113", "113", "Headache"],
                  ["114", "114", "Fever"],
                  ["115", "115", "Skin rash"],
                  ["116", "116", "Peripheral neuropathy"],
                  ["117", "117", "Hepatitis"],
                  ["118", "118", "Jaundice"],
                  ["119", "119", "Dementia"],
                  ["120", "120", "Anaemia"],
                  ["121", "121", "Pancreatitis"],
                  ["122", "122", "CNS adverse event"],
                  ["123", "123", "Other adverse event, specify"],
                  ["131", "131", "Treatment failure, clinical"],
                  ["132", "132", "Treatment failure, immunological"],
                  ["141", "141", "Poor adherence"],
                  ["142", "142", "Patient decision"],
                  ["143", "143", "Pregnancy"],
                  ["144", "144", "End of PMTCT (plus)"],
                  ["145", "145", "Transferred out, specify where"],
                  ["146", "146", "Lost to follow-up"],
                  ["147", "147", "Patient died"],
                  ["148", "148", "Stock-out"],
                  ["149", "149", "Other reason, specify"],
                  ["151", "151", "Restart ARV after 3 or months not on ARV"]
                ]
              }
            },
            {
              "scope": "#/properties/arvMedication/properties/regimenChangeNote",
              "type": "Control"
            }
          ],
          "rule": {
            "effect": "ENABLE",
            "condition": {
              "scope": "#/properties/arvMedication/properties/regimenStatus",
              "schema": {
                "enum": ["START", "CHANGE"]
              }
            }
          }
        },
        {
          "scope": "#/properties/arvMedication/properties/relevantCoMedication",
          "label": "Relevant Co Medication:",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/prophylaxisMedication",
          "type": "Control"
        }
      ]
    },
    {
      "type": "Category",
      "label": "Pregnancy",
      "options": { "icon": "condom" },
      "elements": [
        {
          "type": "Control",
          "label": "Pregnant:",
          "scope": "#/properties/familyPlanning/properties/pregnant"
        },
        {
          "type": "Control",
          "label": "Contraception:",
          "scope": "#/properties/familyPlanning/properties/contraception"
        }
      ]
    },
    {
      "type": "Category",
      "label": "GBV",
      "options": {
        "title": "Gender Based Violence",
        "icon": "gender-based-violence"
      },
      "elements": [
        {
          "type": "Control",
          "label": "Screened?",
          "scope": "#/properties/genderBasedViolence/properties/screened"
        },
        {
          "type": "Control",
          "label": "Type of GBV:",
          "scope": "#/properties/genderBasedViolence/properties/type"
        },
        {
          "type": "Control",
          "label": "Referred for External Services:",
          "scope": "#/properties/genderBasedViolence/properties/referredForExternalServices"
        },
        {
          "type": "Control",
          "label": "Intimate Partner Violence?",
          "scope": "#/properties/genderBasedViolence/properties/intimatePartnerViolence"
        },
        {
          "type": "Control",
          "label": "Rape?",
          "scope": "#/properties/genderBasedViolence/properties/rape"
        },
        {
          "type": "Control",
          "label": "Post GBV Services Provided?",
          "scope": "#/properties/genderBasedViolence/properties/postServiceProvided"
        },
        {
          "type": "Control",
          "label": "Post GBV Service Type:",
          "scope": "#/properties/genderBasedViolence/properties/receivedServiceType"
        }
      ]
    },
    {
      "type": "Category",
      "label": "Viral Load",
      "options": { "icon": "virus" },
      "elements": [
        {
          "type": "VerticalLayout",
          "elements": [
            {
              "type": "Control",
              "label": "Viral Load Done?",
              "scope": "#/properties/viralLoad/properties/tested"
            },
            {
              "type": "Control",
              "scope": "#/properties/viralLoad/properties/targeting",
              "label": "VL Targeting:",
              "options": {
                "show": [
                  ["TARGETED", "Targeted"],
                  ["SCHEDULED", "Scheduled"]
                ]
              }
            },
            {
              "type": "Control",
              "label": "Viral Load Result [copies/ml]",
              "scope": "#/properties/viralLoad/properties/viralLoadResult"
            },
            {
              "type": "Control",
              "label": "Viral Load Status:",
              "scope": "#/properties/viralLoad/properties/viralLoadStatus"
            },
            {
              "type": "Control",
              "label": "EAC Done?",
              "scope": "#/properties/viralLoad/properties/eacDone"
            },
            {
              "type": "EncounterLineChart",
              "scope": "#",
              "options": {
                "values": [
                  {
                    "field": "viralLoad.viralLoadResult",
                    "label": "Viral Load",
                    "unit": "copies/ml"
                  }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "type": "Category",
      "label": "Biochemistry",
      "options": { "icon": "microscope" },
      "elements": [
        {
          "type": "Control",
          "label": "AST [UI/L]",
          "scope": "#/properties/biochem/properties/ast"
        },
        {
          "type": "Control",
          "label": "ALT",
          "scope": "#/properties/biochem/properties/alt"
        },
        {
          "type": "Control",
          "scope": "#/properties/biochem/properties/bilirubin"
        },
        {
          "type": "Control",
          "label": "UEC (Cr)",
          "scope": "#/properties/biochem/properties/uec"
        },
        {
          "type": "Control",
          "label": "CD4 [+cells/mm^3]",
          "scope": "#/properties/biochem/properties/cd4"
        },
        {
          "type": "EncounterLineChart",
          "scope": "#",
          "options": {
            "values": [
              {
                "field": "biochem.cd4",
                "label": "CD4",
                "unit": "+cells/mm^3"
              }
            ]
          }
        }
      ]
    },
    {
      "type": "Category",
      "label": "Haematology",
      "options": { "icon": "test-tube" },
      "elements": [
        {
          "type": "Control",
          "label": "Hep B SAg:",
          "scope": "#/properties/haem/properties/hepBSAg"
        },
        {
          "type": "Control",
          "label": "RBSL/FBSL",
          "scope": "#/properties/haem/properties/rbslToFbsl"
        },
        {
          "type": "Group",
          "label": "FBE",
          "elements": [
            {
              "type": "Control",
              "label": "FBE Hb [g/dL]",
              "scope": "#/properties/haem/properties/fbe/properties/fbeHb"
            },
            {
              "type": "Control",
              "label": "FBE WCC",
              "scope": "#/properties/haem/properties/fbe/properties/fbeWCC"
            },
            {
              "type": "Control",
              "label": "FBE Plt",
              "scope": "#/properties/haem/properties/fbe/properties/fbePlt"
            }
          ]
        },
        {
          "type": "Control",
          "label": "TPHA:",
          "scope": "#/properties/haem/properties/tpha"
        },
        {
          "type": "Control",
          "label": "TLC [+cells/mm3]",
          "scope": "#/properties/haem/properties/tlc"
        }
      ]
    },
    {
      "type": "Category",
      "label": "Tuberculosis",
      "options": { "icon": "lungs" },
      "elements": [
        {
          "type": "Control",
          "label": "TB-Screening:",
          "scope": "#/properties/tuberculosis/properties/tbScreening"
        },
        {
          "type": "Control",
          "label": "TB-GeneXpert:",
          "scope": "#/properties/tuberculosis/properties/tbGeneXpert",
          "options": {
            "show": [
              ["NOT_DETECTED", "Not Detected"],
              ["POSITIVE_RIF_SENSITIVE", "Positive (Rif-Sensitive)"],
              ["POSITIVE_RIF_RESISTANT", "Positive (Rif-Resistant)"]
            ]
          }
        },
        {
          "type": "Control",
          "label": "CXR",
          "scope": "#/properties/tuberculosis/properties/cxr"
        },
        {
          "type": "Control",
          "label": "TB-Sputum:",
          "scope": "#/properties/tuberculosis/properties/tbSputum",
          "options": {
            "show": [
              ["NO_AFB", "No AFB"],
              ["POS_1", "+"],
              ["POS_2", "++"],
              ["POS_3", "+++"]
            ]
          }
        },
        {
          "type": "Control",
          "label": "TB-Status:",
          "scope": "#/properties/tuberculosis/properties/tbStatus"
        }
      ]
    },
    {
      "type": "Category",
      "label": "Index Testing",
      "options": { "icon": "index-testing" },
      "elements": [
        {
          "type": "Control",
          "label": "Index Testing Offered:",
          "scope": "#/properties/indexTesting/properties/indexTestingOffered"
        },
        {
          "type": "Control",
          "label": "IPV Risk?",
          "scope": "#/properties/indexTesting/properties/ipvRisk"
        },
        {
          "type": "Control",
          "label": "Index Testing Accepted?",
          "scope": "#/properties/indexTesting/properties/indexTestingAccepted"
        }
      ]
    },
    {
      "type": "Category",
      "label": "HCV / CrAg",
      "options": { "icon": "liver" },
      "elements": [
        {
          "type": "Control",
          "label": "HCV:",
          "scope": "#/properties/hcvCrag/properties/hcv"
        },
        {
          "type": "Control",
          "label": "CrAg Result:",
          "scope": "#/properties/hcvCrag/properties/crAgResult"
        },
        {
          "type": "Control",
          "scope": "#/properties/hcvCrag/properties/crAgTitre"
        }
      ]
    }
  ],
  "options": {
    "variant": "tab"
  }
}
