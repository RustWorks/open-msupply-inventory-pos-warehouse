{
  "type": "Categorization",
  "elements": [
    {
      "type": "Category",
      "label": "Physical Exam",
      "options": { "icon": "stethoscope" },
      "elements": [
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/height",
          "options": { "width": "100px" }
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/midUpperArmCircumference",
          "options": { "width": "100px" }
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/weight",
          "options": { "width": "100px" }
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/bloodPressure",
          "options": { "width": "100px" }
        },
        {
          "type": "BMI",
          "scope": "#/properties/physicalExamination/properties",
          "label": "Body Mass Index (BMI)"
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/nutritionalStatus",
          "options": {
            "show": [
              ["UNDER_NOURISHED", "Under nourished"],
              ["WELL_NOURISHED", "Well nourished"],
              ["OVERWEIGHT", "Overweight"]
            ]
          }
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/symptoms"
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/opportunisticInfections"
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/whoStaging",
          "options": {
            "show": [
              ["STAGE_1_ASYMPTOMATIC", "Stage 1 - Asymptomatic"],
              ["STAGE_2_MILDLY_SYMPTOMATIC", "Stage 2 - Mildly symptomatic"],
              [
                "STAGE_3_MODERATELY_SYMPTOMATIC",
                "Stage 3 - Moderately symptomatic"
              ],
              ["STAGE_4_SEVERELY_SYMPTOMATIC", "Stage 4 - Severely symptomatic"]
            ]
          }
        },
        {
          "type": "VerticalLayout",
          "elements": [
            {
              "type": "EncounterLineChart",
              "scope": "#",
              "options": {
                "values": [
                  {
                    "field": "physicalExamination.weight",
                    "label": "Weight",
                    "unit": "kg"
                  }
                ]
              }
            },
            {
              "type": "EncounterLineChart",
              "scope": "#",
              "options": {
                "values": [
                  {
                    "field": "physicalExamination.bloodPressure",
                    "label": "Blood Pressure",
                    "unit": "mmHg"
                  }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "type": "Category",
      "label": "Medication",
      "options": { "icon": "medicine" },
      "elements": [
        {
          "scope": "#/properties/arvMedication/properties/regimen",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/pillCount",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/adherenceStatus",
          "type": "Control"
        },
        {
          "label": "Number Of Days Dispensed",
          "options": {
            "baseDatetimeField": "startDatetime",
            "events": [
              {
                "documentType": "HIVCareProgram",
                "name": "Interrupted",
                "scheduleIn": { "days": 0, "minutes": 1 },
                "type": "programStatus"
              },
              {
                "documentType": "HIVCareProgram",
                "name": "Lost to follow up",
                "scheduleIn": { "days": 0, "minutes": 3 },
                "type": "programStatus"
              }
            ],
            "scheduleEventsNow": true,
            "targetField": "numberOfDaysDispensed"
          },
          "scope": "#",
          "type": "DispensedDuration"
        },
        {
          "scope": "#/properties/arvMedication/properties/regimeStatus",
          "type": "Control",
          "options": {
            "show": [
              ["NO_ARV", "No ARV"],
              ["START_ARV", "Start ARV"],
              ["CONTINUE_ARV", "Continue ARV"],
              ["STOP_ARV", "Stop ARV"],
              ["RECOMMENCED_ARV", "Recommenced ARV"],
              ["ARV_ON_HOLD", "ARV on Hold"],
              ["CHANGES_TO_ART_REGIMEN", "Changes to ART Regimen"]
            ]
          }
        },
        {
          "scope": "#/properties/arvMedication/properties/reason",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/relevantCoMedication",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/prophylaxisMedication",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/regimeType",
          "type": "Control",
          "options": {
            "show": [
              ["FIRST_LINE_ADULT", "First Line - Adult"],
              ["FIRST_LINE_PAEDS_20_30_KG", "First Line - Paeds 20-30kg"],
              ["FIRST_LINE_PAEDS_0_20_KG", "First Line - Paeds <20kg"],
              ["SECOND_LINE_ADULT", "Second Line - Adult"],
              ["SECOND_LINE_PAEDS_20_30_KG", "Second Line - Paeds 20-30kg"],
              ["SECOND_LINE_PAEDS_0_20_KG", "Second Line - Paeds <20kg"]
            ]
          }
        },
        {
          "scope": "#/properties/arvMedication/properties/change",
          "type": "Control",
          "options": {
            "show": [
              ["SUBSTITUTION", "Substitution of ART Regimen"],
              ["SWITCHING", "Switching of ART regimen"]
            ]
          }
        },
        {
          "scope": "#/properties/arvMedication/properties/previousRegimen",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/reasonSubstitutionWithinFirstLine",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/reasonFirstToSecondLine",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/stopReason",
          "type": "Control"
        }
      ]
    },
    {
      "type": "Category",
      "label": "Family Planning",
      "options": { "icon": "condom" },
      "elements": [
        {
          "type": "Control",
          "scope": "#/properties/familyPlanning/properties/pregnant"
        },
        {
          "type": "Control",
          "scope": "#/properties/familyPlanning/properties/contraception"
        }
      ]
    },
    {
      "type": "Category",
      "label": "Viral Load",
      "options": { "icon": "virus" },
      "elements": [
        {
          "type": "VerticalLayout",
          "elements": [
            {
              "type": "Control",
              "scope": "#/properties/viralLoad/properties/tested"
            },
            {
              "type": "Control",
              "scope": "#/properties/viralLoad/properties/targetting",
              "options": {
                "show": [
                  ["TARGETED", "Targeted"],
                  ["SCHEDULED", "Scheduled"]
                ]
              }
            },
            {
              "type": "Control",
              "label": "EAC Done",
              "scope": "#/properties/viralLoad/properties/eacDone"
            },
            {
              "type": "Control",
              "label": "Viral Load Result [copies/ml]",
              "scope": "#/properties/viralLoad/properties/viralLoadResult"
            },
            {
              "type": "EncounterLineChart",
              "scope": "#",
              "options": {
                "values": [
                  {
                    "field": "viralLoad.viralLoadResult",
                    "label": "Viral Load",
                    "unit": "copies/ml"
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "EventTrigger",
          "scope": "#",
          "options": {
            "baseDatetimeField": "startDatetime",
            "trigger": [
              {
                "triggerField": "viralLoad.tested",
                "isTruthy": true
              },
              {
                "triggerField": "viralLoad.viralLoadResult",
                "isFalsy": true
              }
            ],
            "group": "HIVCareStatus",
            "events": [
              {
                "documentType": "HIVCareEncounter",
                "documentName": true,
                "name": "Pending VL Result",
                "type": "encounterStatus"
              }
            ]
          }
        },
        {
          "type": "EventTrigger",
          "scope": "#",
          "options": {
            "baseDatetimeField": "startDatetime",
            "trigger": [
              {
                "triggerField": "viralLoad.viralLoadResult",
                "isTruthy": true
              }
            ],
            "group": "HIVCareStatus",
            "events": [
              {
                "documentType": "HIVCareEncounter",
                "documentName": true,
                "name": "VL Result",
                "type": "encounterStatus"
              }
            ]
          }
        }
      ]
    },
    {
      "type": "Category",
      "label": "Biochem",
      "options": { "icon": "microscope" },
      "elements": [
        {
          "type": "Control",
          "label": "AST",
          "scope": "#/properties/biochem/properties/ast"
        },
        {
          "type": "Control",
          "label": "ALT",
          "scope": "#/properties/biochem/properties/alt"
        },
        {
          "type": "Control",
          "scope": "#/properties/biochem/properties/bilirubin"
        },
        {
          "type": "Control",
          "label": "UEC (Cr)",
          "scope": "#/properties/biochem/properties/uec"
        },
        {
          "type": "Control",
          "label": "CD4 [+cells/mm^3]",
          "scope": "#/properties/biochem/properties/cd4"
        },
        {
          "type": "EncounterLineChart",
          "scope": "#",
          "options": {
            "values": [
              {
                "field": "biochem.cd4",
                "label": "CD4",
                "unit": "+cells/mm^3"
              }
            ]
          }
        }
      ]
    },
    {
      "type": "Category",
      "label": "Haem",
      "options": { "icon": "test-tube" },
      "elements": [
        {
          "type": "Control",
          "label": "Hep B SAg",
          "scope": "#/properties/haem/properties/hepBSAg"
        },
        {
          "type": "Control",
          "label": "RBSL/FBSL",
          "scope": "#/properties/haem/properties/rbslToFbsl"
        },
        {
          "type": "Control",
          "label": "FBE Hb",
          "scope": "#/properties/haem/properties/fbeHb"
        },
        {
          "type": "Control",
          "label": "FBE WCC",
          "scope": "#/properties/haem/properties/fbeWCC"
        },
        {
          "type": "Control",
          "label": "FBE Plt",
          "scope": "#/properties/haem/properties/fbePlt"
        },
        {
          "type": "Control",
          "label": "TPHA",
          "scope": "#/properties/haem/properties/tpha"
        },
        {
          "type": "Control",
          "label": "TLC",
          "scope": "#/properties/haem/properties/tlc"
        }
      ]
    },
    {
      "type": "Category",
      "label": "TB / HCV",
      "options": { "icon": "lungs" },
      "elements": [
        {
          "type": "Control",
          "label": "TB-GeneXpert",
          "scope": "#/properties/tbHcv/properties/tbGeneXpert",
          "options": {
            "show": [
              ["NOT_DETECTED", "Not Detected"],
              ["POSITIVE_RIF_SENSITIVE", "Positive (Rif-Sensitive)"],
              ["POSITIVE_RIF_RESISTANT", "Positive (Rif-Resistant)"]
            ]
          }
        },
        {
          "type": "Control",
          "label": "CXR",
          "scope": "#/properties/tbHcv/properties/cxr"
        },
        {
          "type": "Control",
          "label": "TB-Sputum",
          "scope": "#/properties/tbHcv/properties/tbSputum",
          "options": {
            "show": [
              ["NO_AFB", "No AFB"],
              ["POS_1", "+"],
              ["POS_2", "++"],
              ["POS_3", "+++"]
            ]
          }
        },
        {
          "type": "Control",
          "label": "HCV",
          "scope": "#/properties/tbHcv/properties/hcv"
        }
      ]
    }
  ],
  "options": {
    "variant": "tab"
  }
}
