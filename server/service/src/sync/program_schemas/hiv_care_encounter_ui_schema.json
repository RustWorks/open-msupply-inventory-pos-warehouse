{
  "type": "Categorization",
  "elements": [
    {
      "type": "Category",
      "label": "Physical Exam",
      "options": { "icon": "stethoscope" },
      "elements": [
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/height",
          "options": { "width": "100px" }
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/midUpperArmCircumference",
          "options": { "width": "100px" }
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/weight",
          "options": { "width": "100px" }
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/bloodPressure",
          "options": { "width": "100px" }
        },
        {
          "type": "BMI",
          "scope": "#/properties/physicalExamination/properties",
          "label": "Body Mass Index (BMI)"
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/nutritionalStatus"
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/symptoms"
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/opportunisticInfections"
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/whoStaging"
        },
        {
          "type": "VerticalLayout",
          "elements": [
            {
              "type": "EncounterLineChart",
              "scope": "#",
              "options": {
                "values": [
                  {
                    "field": "physicalExamination.weight",
                    "label": "Weight",
                    "unit": "kg"
                  }
                ]
              }
            },
            {
              "type": "EncounterLineChart",
              "scope": "#",
              "options": {
                "values": [
                  {
                    "field": "physicalExamination.bloodPressure",
                    "label": "Blood Pressure",
                    "unit": "mmHg"
                  }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "type": "Category",
      "label": "Medication",
      "options": { "icon": "medicine" },
      "elements": [
        {
          "scope": "#/properties/arvMedication/properties/regimen",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/pillCount",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/adherenceStatus",
          "type": "Control"
        },
        {
          "label": "Number Of Days Dispensed",
          "options": {
            "baseDatetimeField": "startDatetime",
            "events": [
              {
                "group": "HivCareEncounterDispensingStatus",
                "name": "Interrupted",
                "scheduleIn": { "days": 0, "minutes": 1 },
                "type": "status"
              },
              {
                "group": "HivCareEncounterDispensingStatus",
                "name": "Lost to follow up",
                "scheduleIn": { "days": 0, "minutes": 3 },
                "type": "status"
              }
            ],
            "scheduleEventsNow": true,
            "targetField": "numberOfDaysDispensed"
          },
          "scope": "#",
          "type": "DispensedDuration"
        },
        {
          "scope": "#/properties/arvMedication/properties/regimeStatus",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/reason",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/relevantCoMedication",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/prophylaxisMedication",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/regimeType",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/change",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/previousRegimen",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/reasonSubstitutionWithinFirstLine",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/reasonFirstToSecondLine",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/stopReason",
          "type": "Control"
        }
      ]
    },
    {
      "type": "Category",
      "label": "Family Planning",
      "options": { "icon": "condom" },
      "elements": [
        {
          "type": "Control",
          "scope": "#/properties/familyPlanning/properties/pregnant"
        },
        {
          "type": "Control",
          "scope": "#/properties/familyPlanning/properties/contraception"
        }
      ]
    },
    {
      "type": "Category",
      "label": "Viral Load",
      "options": { "icon": "virus" },
      "elements": [
        {
          "type": "VerticalLayout",
          "elements": [
            {
              "type": "Control",
              "scope": "#/properties/viralLoad/properties/tested"
            },
            {
              "type": "Control",
              "scope": "#/properties/viralLoad/properties/targetting"
            },
            {
              "type": "Control",
              "label": "EAC Done",
              "scope": "#/properties/viralLoad/properties/eacDone"
            },
            {
              "type": "Control",
              "label": "Viral Load Result [copies/ml]",
              "scope": "#/properties/viralLoad/properties/viralLoadResult"
            },
            {
              "type": "EncounterLineChart",
              "scope": "#",
              "options": {
                "values": [
                  {
                    "field": "viralLoad.viralLoadResult",
                    "label": "Viral Load",
                    "unit": "copies/ml"
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "EventTrigger",
          "scope": "#",
          "options": {
            "baseDatetimeField": "startDatetime",
            "group": "PendingLabResults",
            "trigger": [
              {
                "triggerField": "viralLoad.tested",
                "isTruthy": true
              },
              {
                "triggerField": "viralLoad.viralLoadResult",
                "isFalsy": true
              }
            ],
            "events": [
              {
                "name": "Pending VL Result",
                "type": "status",
                "context": {
                  "documentName": true
                }
              }
            ]
          }
        },
        {
          "type": "EventTrigger",
          "scope": "#",
          "options": {
            "baseDatetimeField": "startDatetime",
            "group": "PendingLabResults",
            "trigger": [
              {
                "triggerField": "viralLoad.viralLoadResult",
                "isTruthy": true
              }
            ],
            "events": [
              {
                "name": "VL Result",
                "type": "status",
                "context": {
                  "documentName": true
                }
              }
            ]
          }
        }
      ]
    },
    {
      "type": "Category",
      "label": "Biochem",
      "options": { "icon": "microscope" },
      "elements": [
        {
          "type": "Control",
          "label": "AST",
          "scope": "#/properties/biochem/properties/ast"
        },
        {
          "type": "Control",
          "label": "ALT",
          "scope": "#/properties/biochem/properties/alt"
        },
        {
          "type": "Control",
          "scope": "#/properties/biochem/properties/bilirubin"
        },
        {
          "type": "Control",
          "label": "UEC (Cr)",
          "scope": "#/properties/biochem/properties/uec"
        },
        {
          "type": "Control",
          "label": "CD4 [+cells/mm^3]",
          "scope": "#/properties/biochem/properties/cd4"
        },
        {
          "type": "EncounterLineChart",
          "scope": "#",
          "options": {
            "values": [
              {
                "field": "biochem.cd4",
                "label": "CD4",
                "unit": "+cells/mm^3"
              }
            ]
          }
        }
      ]
    },
    {
      "type": "Category",
      "label": "Haem",
      "options": { "icon": "test-tube" },
      "elements": [
        {
          "type": "Control",
          "label": "Hep B SAg",
          "scope": "#/properties/haem/properties/hepBSAg"
        },
        {
          "type": "Control",
          "label": "RBSL/FBSL",
          "scope": "#/properties/haem/properties/rbslToFbsl"
        },
        {
          "type": "Control",
          "label": "FBE Hb",
          "scope": "#/properties/haem/properties/fbeHb"
        },
        {
          "type": "Control",
          "label": "FBE WCC",
          "scope": "#/properties/haem/properties/fbeWCC"
        },
        {
          "type": "Control",
          "label": "FBE Plt",
          "scope": "#/properties/haem/properties/fbePlt"
        },
        {
          "type": "Control",
          "label": "TPHA",
          "scope": "#/properties/haem/properties/tpha"
        },
        {
          "type": "Control",
          "label": "TLC",
          "scope": "#/properties/haem/properties/tlc"
        }
      ]
    },
    {
      "type": "Category",
      "label": "TB / HCV",
      "options": { "icon": "lungs" },
      "elements": [
        {
          "type": "Control",
          "label": "TB-GeneXpert",
          "scope": "#/properties/tbHcv/properties/tbGeneXpert"
        },
        {
          "type": "Control",
          "label": "CXR",
          "scope": "#/properties/tbHcv/properties/cxr"
        },
        {
          "type": "Control",
          "label": "TB-Sputum",
          "scope": "#/properties/tbHcv/properties/tbSputum"
        },
        {
          "type": "Control",
          "label": "HCV",
          "scope": "#/properties/tbHcv/properties/hcv"
        }
      ]
    }
  ],
  "options": {
    "variant": "tab"
  }
}
