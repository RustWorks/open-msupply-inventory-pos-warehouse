{
  "type": "Categorization",
  "elements": [
    {
      "type": "Category",
      "label": "Physical Exam",
      "options": { "icon": "stethoscope" },
      "elements": [
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/height"
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/midUpperArmCircumference"
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/weight"
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/bloodPressure"
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/bodyMassIndex"
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/nutritionalStatus"
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/symptoms"
        },
        {
          "type": "Control",
          "scope": "#/properties/physicalExamination/properties/opportunisticInfection"
        },
        {
          "type": "HorizontalLayout",
          "elements": [
            {
              "type": "EncounterLineChart",
              "scope": "#",
              "options": {
                "values": [
                  {
                    "field": "physicalExamination.weight",
                    "label": "Weight",
                    "unit": "kg"
                  }
                ]
              }
            },
            {
              "type": "EncounterLineChart",
              "scope": "#",
              "options": {
                "values": [
                  {
                    "field": "physicalExamination.bloodPressure",
                    "label": "Blood Pressure",
                    "unit": "mmHg"
                  }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "type": "Category",
      "label": "Medication",
      "options": { "icon": "medicine" },
      "elements": [
        {
          "scope": "#/properties/arvMedication/properties/regimen",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/regimeType",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/regimeStatus",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/change",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/pillCount",
          "type": "Control"
        },
        {
          "label": "Number Of Days Dispensed",
          "options": {
            "baseDatetimeField": "startDatetime",
            "events": [
              {
                "group": "HivCareEncounterDispensingStatus",
                "name": "Interrupted",
                "scheduleIn": { "days": 0, "minutes": 1 },
                "type": "status"
              },
              {
                "group": "HivCareEncounterDispensingStatus",
                "name": "Lost to follow up",
                "scheduleIn": { "days": 0, "minutes": 3 },
                "type": "status"
              }
            ],
            "scheduleEventsNow": true,
            "targetField": "numberOfDaysDispensed"
          },
          "scope": "#",
          "type": "DispensedDuration"
        },
        {
          "scope": "#/properties/arvMedication/properties/previousRegimen",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/reasonSubstitutionWithinFirstLine",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/reasonFirstToSecondLine",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/stopReason",
          "type": "Control"
        },
        {
          "scope": "#/properties/arvMedication/properties/initialWeight",
          "type": "Control"
        }
      ]
    },
    {
      "type": "Category",
      "label": "Family Planning",
      "options": { "icon": "condom" },
      "elements": [
        {
          "type": "Control",
          "scope": "#/properties/familyPlanning/properties/pregnant"
        },
        {
          "type": "Control",
          "scope": "#/properties/familyPlanning/properties/contraception"
        }
      ]
    },
    {
      "type": "Category",
      "label": "Viral Load",
      "options": { "icon": "microscope" },
      "elements": [
        {
          "type": "VerticalLayout",
          "elements": [
            {
              "type": "Control",
              "scope": "#/properties/viralLoad/properties/tested"
            },
            {
              "type": "Control",
              "scope": "#/properties/viralLoad/properties/targetting"
            },
            {
              "type": "Control",
              "scope": "#/properties/viralLoad/properties/eacDone"
            },
            {
              "type": "Control",
              "scope": "#/properties/viralLoad/properties/viralLoadResult"
            }
          ]
        },
        {
          "type": "EventTrigger",
          "scope": "#",
          "options": {
            "baseDatetimeField": "startDatetime",
            "group": "PendingLabResults",
            "trigger": [
              {
                "triggerField": "viralLoad.tested",
                "isTruthy": true
              },
              {
                "triggerField": "viralLoad.viralLoadResult",
                "isFalsy": true
              }
            ],
            "events": [
              {
                "name": "Pending VL Result",
                "type": "status",
                "context": {
                  "documentName": true
                }
              }
            ]
          }
        },
        {
          "type": "EventTrigger",
          "scope": "#",
          "options": {
            "baseDatetimeField": "startDatetime",
            "group": "PendingLabResults",
            "trigger": [
              {
                "triggerField": "viralLoad.viralLoadResult",
                "isTruthy": true
              }
            ],
            "events": [
              {
                "name": "VL Result",
                "type": "status",
                "context": {
                  "documentName": true
                }
              }
            ]
          }
        }
      ]
    },
    {
      "type": "Category",
      "label": "Biochem",
      "options": { "icon": "microscope" },
      "elements": [
        {
          "type": "Control",
          "scope": "#/properties/biochem"
        }
      ]
    },
    {
      "type": "Category",
      "label": "Haem",
      "options": { "icon": "microscope" },
      "elements": [
        {
          "type": "Control",
          "scope": "#/properties/haem"
        }
      ]
    },
    {
      "type": "Category",
      "label": "TB / HCV",
      "options": { "icon": "lungs" },
      "elements": [
        {
          "type": "Control",
          "scope": "#/properties/tbHcv"
        }
      ]
    }
  ],
  "options": {
    "variant": "tab"
  }
}
