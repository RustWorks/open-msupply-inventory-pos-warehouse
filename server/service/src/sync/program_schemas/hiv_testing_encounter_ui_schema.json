{
  "type": "Categorization",
  "elements": [
    {
      "type": "Category",
      "label": "Family Planning",
      "options": { "icon": "condom" },
      "elements": [
        {
          "type": "Control",
          "scope": "#/properties/familyPlanning/properties/pregnant"
        },
        {
          "type": "Control",
          "scope": "#/properties/familyPlanning/properties/contraception"
        }
      ]
    },
    {
      "type": "Category",
      "label": "Risk Behaviour",
      "options": { "icon": "document" },
      "elements": [
        {
          "type": "Control",
          "scope": "#/properties/riskBehaviour/properties/receivedBloodTransfusion"
        },
        {
          "type": "Control",
          "scope": "#/properties/riskBehaviour/properties/injectedDrugsWithoutDoctorAdvice"
        },
        {
          "type": "Control",
          "scope": "#/properties/riskBehaviour/properties/accidentalNeedlePick"
        },
        {
          "type": "Control",
          "scope": "#/properties/riskBehaviour/properties/sexualTransmittedInfection"
        },
        {
          "type": "Control",
          "scope": "#/properties/riskBehaviour/properties/unprotectedVaginalSex"
        },
        {
          "type": "Control",
          "scope": "#/properties/riskBehaviour/properties/unprotectedAnalSex"
        },
        {
          "type": "Control",
          "scope": "#/properties/riskBehaviour/properties/prostitution"
        },
        {
          "type": "Control",
          "scope": "#/properties/riskBehaviour/properties/sexWithSameSex"
        },
        {
          "type": "Control",
          "scope": "#/properties/riskBehaviour/properties/forcedSexWithoutConsent"
        },
        {
          "type": "Control",
          "scope": "#/properties/riskBehaviour/properties/numberMaleSexualPartners6Month"
        },
        {
          "type": "Control",
          "scope": "#/properties/riskBehaviour/properties/numberFemaleSexualPartners6Month"
        },
        {
          "type": "DecisionTree",
          "scope": "#/properties/riskBehaviour/properties/riskGroup",
          "options": {
            "basePath": "riskBehaviour",
            "tree": {
              "root": "root",
              "nodes": {
                "root": {
                  "branches": [
                    {
                      "patientField": "gender",
                      "equalTo": "MALE",
                      "node": "isMale"
                    },
                    {
                      "patientField": "gender",
                      "equalTo": "FEMALE",
                      "node": "isFemale"
                    },
                    {
                      "patientField": "gender",
                      "equalTo": "TRANSGENDER",
                      "node": "isTransgender"
                    }
                  ]
                },
                "isMale": {
                  "value": "LRM",
                  "branches": [
                    {
                      "dataField": "sexWithSameSex",
                      "equalTo": true,
                      "node": "maleSexWithSameSex"
                    },
                    {
                      "dataField": "unprotectedAnalSex",
                      "equalTo": true,
                      "node": "maleSexWithSameSex"
                    },
                    {
                      "dataField": "numberMaleSexualPartners6Month",
                      "greaterThan": 0,
                      "node": "maleSexWithSameSex"
                    },
                    {
                      "dataField": "forcedSexWithoutConsent",
                      "equalTo": true,
                      "node": "maleHadSexWithFemale"
                    },
                    {
                      "dataField": "numberFemaleSexualPartners6Month",
                      "greaterThan": 0,
                      "node": "maleHadSexWithFemale"
                    }
                  ]
                },
                "maleSexWithSameSex": {
                  "value": "MSM",
                  "branches": [
                    {
                      "dataField": "prostitution",
                      "equalTo": true,
                      "node": "maleMaleSexWorker"
                    }
                  ]
                },
                "maleMaleSexWorker": {
                  "value": "MSMSW"
                },
                "maleHadSexWithFemale": {
                  "value": "LRM",
                  "branches": [
                    {
                      "dataField": "numberFemaleSexualPartners6Month",
                      "greaterThan": 1,
                      "node": "maleHadSexWithMultiFemale"
                    }
                  ]
                },
                "maleHadSexWithMultiFemale": {
                  "value": "HRM",
                  "branches": [
                    {
                      "dataField": "prostitution",
                      "equalTo": true,
                      "node": "maleHadSexWithMultiFemaleSexWorker"
                    }
                  ]
                },
                "maleHadSexWithMultiFemaleSexWorker": {
                  "value": "MSW"
                },
                "isFemale": {
                  "value": "LRW",
                  "branches": [
                    {
                      "dataField": "unprotectedVaginalSex",
                      "equalTo": true,
                      "node": "femaleHadSex"
                    },
                    {
                      "dataField": "unprotectedAnalSex",
                      "equalTo": true,
                      "node": "femaleHadSex"
                    },
                    {
                      "dataField": "sexWithSameSex",
                      "equalTo": true,
                      "node": "femaleHadSex"
                    },
                    {
                      "dataField": "forcedSexWithoutConsent",
                      "equalTo": true,
                      "node": "femaleHadSex"
                    },
                    {
                      "dataField": "numberMaleSexualPartners6Month",
                      "greaterThan": 0,
                      "node": "femaleHadSex"
                    },
                    {
                      "dataField": "numberFemaleSexualPartners6Month",
                      "greaterThan": 0,
                      "node": "femaleHadSex"
                    }
                  ]
                },
                "femaleHadSex": {
                  "value": "LRW",
                  "branches": [
                    {
                      "dataField": "numberMaleSexualPartners6Month",
                      "greaterThan": 1,
                      "node": "femaleHadSexMulti"
                    },
                    {
                      "dataField": "numberFemaleSexualPartners6Month",
                      "greaterThan": 1,
                      "node": "femaleHadSexMulti"
                    }
                  ]
                },
                "femaleHadSexMulti": {
                  "value": "HRW",
                  "branches": [
                    {
                      "dataField": "prostitution",
                      "equalTo": true,
                      "node": "femaleSexWorker"
                    }
                  ]
                },
                "femaleSexWorker": {
                  "value": "FSW"
                },
                "isTransgender": {
                  "value": "TG",
                  "branches": [
                    {
                      "dataField": "prostitution",
                      "equalTo": true,
                      "node": "tgSexWorker"
                    }
                  ]
                },
                "tgSexWorker": {
                  "value": "TGSW"
                }
              }
            }
          }
        }
      ]
    },
    {
      "type": "Category",
      "label": "HIV Testing",
      "options": { "icon": "stethoscope" },
      "elements": [
        {
          "type": "Control",
          "scope": "#/properties/hivTesting/properties/datetime"
        },
        {
          "type": "Control",
          "scope": "#/properties/hivTesting/properties/type"
        },
        {
          "type": "Control",
          "scope": "#/properties/hivTesting/properties/result",
          "options": {
            "show": [
              ["POSITIVE", "Positive"],
              ["NEGATIVE", "Negative"],
              ["UNKNOWN", "Unknown"]
            ]
          }
        }
      ]
    }
  ],
  "options": {
    "variant": "tab"
  }
}
