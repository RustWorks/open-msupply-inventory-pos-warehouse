{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "EncounterEvent": {
      "properties": {
        "activeDatetime": {
          "description": "Time when the event becomes active. This can be in the future. For example, a status could be set to become active after a certain period of time.",
          "format": "date-time",
          "type": "string"
        },
        "documentName": {
          "description": "The event target document name, if event is associated with a specific document",
          "type": "string"
        },
        "documentType": {
          "description": "The document type this event is associated with",
          "type": "string"
        },
        "group": {
          "description": "Field to group events.\n\nMotivation: UI components usually only update a subset of \"their\" events. The group field can be used to group or \"tag\" events so that the UI component knows which events to update. Note, the event type is in general not enough since multiple UI components could update events of the same type.",
          "type": "string"
        },
        "name": {
          "description": "Name of this specific event. There could be multiple events of the same type but with different names. For example, two event could have type 'status' and name \"Status name 1\" and \"Status name 2\"",
          "type": "string"
        },
        "type": {
          "description": "For example, encounter 'status'.",
          "type": "string"
        }
      },
      "required": ["activeDatetime", "documentType", "type"],
      "type": "object"
    },
    "EncounterStatus": {
      "enum": ["SCHEDULED", "DONE", "CANCELLED"],
      "type": "string"
    },
    "FamilyPlanning": {
      "properties": {
        "contraception": {
          "description": "13197004 Contraception",
          "type": "boolean"
        },
        "pregnant": {
          "description": "77386006 Pregnant",
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "HIVCareEncounter": {
      "properties": {
        "arvMedication": {
          "properties": {
            "adherenceStatus": {
              "description": "Antiretroviral adherence status",
              "enum": ["GOOD", "MEDIUM", "POOR"],
              "type": "string"
            },
            "prophylaxisMedication": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "quantityPrescribed": {
              "description": "Number of pills prescribed",
              "minimum": 0,
              "type": "number"
            },
            "regimen": {
              "description": "Antiretroviral treatment regimen",
              "enum": [
                "1a-New",
                "1a-Old",
                "1b-New",
                "1b-Old",
                "2a-New",
                "2a-Old",
                "2b-New",
                "2b-Old",
                "2c-New",
                "3a-New",
                "3a-Old",
                "3b-New",
                "3b-Old",
                "3c-New",
                "4a-New",
                "4a-Old",
                "4b-New",
                "4b-Old",
                "4c-New",
                "4c-Old",
                "5a-New",
                "5a-Old",
                "5b-New",
                "5b-Old",
                "6a-New",
                "6a-Old",
                "6b-New",
                "6b-Old",
                "6c-New",
                "6c-Old",
                "Other"
              ],
              "type": "string"
            },
            "regimenChangeNote": {
              "type": "string"
            },
            "regimenChangeReason": {
              "enum": [
                "51",
                "52",
                "53",
                "54",
                "55",
                "56",
                "57",
                "58",
                "99",
                "101",
                "102",
                "103",
                "104",
                "105",
                "106",
                "107",
                "108",
                "109",
                "110",
                "111",
                "112",
                "113",
                "114",
                "115",
                "116",
                "117",
                "118",
                "119",
                "120",
                "121",
                "122",
                "123",
                "131",
                "132",
                "141",
                "142",
                "143",
                "144",
                "145",
                "146",
                "147",
                "148",
                "149",
                "151"
              ],
              "type": "string"
            },
            "regimenStatus": {
              "description": "Antiretroviral treatment status",
              "enum": ["NO", "START", "CONTINUE", "CHANGE", "STOP"],
              "type": "string"
            },
            "relevantCoMedication": {
              "enum": [
                "Asthma medication",
                "Diabetes medication",
                "Heart condition medication",
                "Kidney medication",
                "Liver medication"
              ],
              "type": "string"
            },
            "remainingPillCount": {
              "description": "Number of units pills that the patient has left from the last dispensing event (last encounter)",
              "minimum": 0,
              "type": "number"
            }
          },
          "type": "object"
        },
        "biochem": {
          "properties": {
            "alt": {
              "type": "number"
            },
            "ast": {
              "description": "[IU/L]",
              "type": "number"
            },
            "bilirubin": {
              "type": "number"
            },
            "cd4": {
              "description": "[+cells/mm^3]",
              "type": "number"
            },
            "uec": {
              "description": "UEC (Cr)",
              "type": "number"
            }
          },
          "type": "object"
        },
        "endDatetime": {
          "description": "Encounter end date and time",
          "format": "date-time",
          "type": "string"
        },
        "events": {
          "items": {
            "$ref": "#/definitions/EncounterEvent"
          },
          "type": "array"
        },
        "familyPlanning": {
          "$ref": "#/definitions/FamilyPlanning"
        },
        "haem": {
          "properties": {
            "fbeHb": {
              "description": "Hb [g/dL]",
              "type": "number"
            },
            "fbePlt": {
              "description": "Plt",
              "type": "number"
            },
            "fbeWCC": {
              "description": "WCC",
              "type": "number"
            },
            "hepBSAg": {
              "enum": ["Pos", "Neg"],
              "type": "string"
            },
            "rbslToFbsl": {
              "description": "RBSL/FBSL",
              "type": "string"
            },
            "tlc": {
              "description": "[+cells/mm^3]",
              "type": "number"
            },
            "tpha": {
              "enum": ["Pos", "Neg"],
              "type": "string"
            }
          },
          "type": "object"
        },
        "physicalExamination": {
          "properties": {
            "bloodPressure": {
              "description": "75367002\tBlood pressure [mmHg]",
              "examples": ["90/60", "120/80"],
              "pattern": "^\\d{3}\\/\\d{2}$",
              "title": "BP in mmHg",
              "type": "string"
            },
            "bodyMassIndex": {
              "description": "60621009\tBody mass index (BMI)",
              "type": "number"
            },
            "height": {
              "description": "50373000\tBody height measure [m]",
              "examples": ["1.55", "0.92", "1.75"],
              "pattern": "^\\d\\.\\d{2}$",
              "title": "Height in m",
              "type": "string"
            },
            "midUpperArmCircumference": {
              "description": "284473002\tMid upper arm circumference (MUAC) [cm]",
              "examples": ["23.0", "21.4"],
              "pattern": "^\\d+\\.\\d+$",
              "title": "MUAC in cm",
              "type": "string"
            },
            "nutritionalStatus": {
              "description": "366364004  nutritional status",
              "enum": ["UNDER_NOURISHED", "WELL_NOURISHED", "OVERWEIGHT"],
              "type": "string"
            },
            "opportunisticInfections": {
              "items": {
                "enum": [
                  "411 - 1 - (1) Asymptomatic",
                  "412 - 1 - (1) Persistent generalized lymphdenopathy (PGL)",
                  "421 - 2 - (2) Moderate unexplained weight loss (<10% of presumed of measured body weight)",
                  "424 - 2 - (4) Angular cheilitis",
                  "425 - 2 - (4) Recurrent oral ulcerations (2 or more episodes in 6 months",
                  "426 - 2 - (4) Papular pruritic eruptions",
                  "427 - 2 - (4) Seborrhoeic dermatitis",
                  "428 - 2 - (4) Fungal nail infections of fingers",
                  "429 - 2 - (5) Herpes zoster (past or current episodes. in last 2 years)",
                  "430 - 2 - (6) Recurrent respiratory tract infections (RTIs, sinusitis, bronchitis, otitis media, pharyngitis)",
                  "431 - 3 - (7) Severe weight loss (> 10% of presumed or measuured body weight)",
                  "432 - 3 - (8) Unexplained chronic diarrhoea for longer than one month",
                  "433 - 3 - (9) Unexplained persistent fever (intermittent or constant for longer than one month)",
                  "434 - 3 - (10) Oral candidiasis",
                  "435 - 3 - (11) Oral hairy leukoplakia",
                  "436 - 3 - (12) Pulmonary tuberculosis (TB) diagnosed in the last two years",
                  "437 - 3 - Acute necrotizing ulcerative stomatitis, gingivitis or periodontitis",
                  "439 - 3 - Unexplained aenemia (<8 g/dl), and or neutropenia (<500/mm3) and or thrombocytopenia (<50 000/mm3) for more...",
                  "440 - 3 - Severe scabies (Norwegian scabies)",
                  "441 - 4 - (14) HIV wasting syndrome",
                  "442 - 4 - (15) Pneumocystis pneumonia",
                  "443 - 4 - Reccurent severe or radiological bacterial pneumonia (2 or more episodes within one year)",
                  "444 - 4 - (16) Central nervous system (CNS) toxoplasmosis",
                  "445 - 4 - (17) Cryptosporidiosis (diahorea more than 1 month)",
                  "446 - 4 - Extrapulmonary Cryptosporidiosis",
                  "448 - 4 - (18) Cryptococcal meningitis or other extrapulmonary disease",
                  "450 - 4 - (20) Herpes simplex infection (orolabial, genital or anorectal of more than one month's duuration)",
                  "451 - 4 - (21) Progressive multifocal leukoencephalopathy (PML)",
                  "452 - 4 - (22) Any disseminated mycosis (e.g. histoplasmosis, coccidiomycosis, peniciliosis)",
                  "453 - 4 - (23) Candida of trachea, bronchi or lungs",
                  "454 - 4 - (23) Oesophageal candidiasis",
                  "455 - 4 - (24) Disseminated non-tuberculous mycobacteria infection",
                  "457 - 4 - (25) Non-typhoidal salmonella septicaemia (2 or more episodes in one year)",
                  "458 - 4 - (26) Extrapulmonary tuberculosis",
                  "459 - 4 - (27) Lymphoma (cerebral or B cell non-Hodgkin)",
                  "460 - 4 - (28) Kaposi's sarcoma",
                  "461 - 4 - (29) HIV encephalopathy",
                  "462 - 4 - Invasive cervical carcinoma",
                  "463 - 4 - Visceral leishmaniasis",
                  "465 - 4 - Unexplained bilateral paralysis",
                  "469 - 4 - Isosporiasis"
                ],
                "type": "string"
              },
              "type": "array"
            },
            "symptoms": {
              "items": {
                "enum": [
                  "Anaemia",
                  "Abdominal Pain",
                  "Burning/Numb/Tingling",
                  "Cryptococcal Meningitis",
                  "Dizzy",
                  "Anxiety",
                  "Nightmare",
                  "Depression",
                  "Neuritis",
                  "Cough",
                  "Diarrhoea",
                  "Difficulty Breathing",
                  "Dementia",
                  "HIV Encephalopathy",
                  "Fatigue",
                  "Fat changes",
                  "Fever",
                  "Genital Ulcer Disease",
                  "Headache",
                  "Immune Reconstitution Inflammatory Syndrome",
                  "Jaundice",
                  "Kaposi's Sarcoma",
                  "Lactic acidosis",
                  "Molluscum",
                  "Nausea",
                  "Osephageal Candidiasis",
                  "Pneumonia",
                  "Pneumo Cystis Pneumonia",
                  "Parotid Enlargement",
                  "Pelvic Inflammatory Disease",
                  "Papular Pruritic Eruptions",
                  "Rash",
                  "Thrush - oral / vaginal",
                  "Urethral Discharge",
                  "Ulcers - mouth or other",
                  "Weight loss",
                  "Herpes Zoster"
                ],
                "type": "string"
              },
              "type": "array"
            },
            "weight": {
              "description": "735395000\tCurrent body weight [kg]",
              "examples": ["75.1", "60.0"],
              "pattern": "^\\d+\\.\\d+$",
              "title": "Weight in kg",
              "type": "string"
            },
            "whoStaging": {
              "description": "420721002 Acquired immunodeficiency syndrome-associated disorder (disorder)",
              "enum": [
                "STAGE_1_ASYMPTOMATIC",
                "STAGE_2_MILDLY_SYMPTOMATIC",
                "STAGE_3_MODERATELY_SYMPTOMATIC",
                "STAGE_4_SEVERELY_SYMPTOMATIC"
              ],
              "title": "WHO Staging",
              "type": "string"
            }
          },
          "type": "object"
        },
        "practitioner": {
          "$ref": "#/definitions/Practitioner"
        },
        "startDatetime": {
          "description": "Encounter start date and time",
          "format": "date-time",
          "type": "string"
        },
        "status": {
          "$ref": "#/definitions/EncounterStatus"
        },
        "tbHcv": {
          "properties": {
            "cxr": {
              "type": "number"
            },
            "hcv": {
              "description": "HCV",
              "enum": ["Pos", "Neg"],
              "type": "string"
            },
            "tbGeneXpert": {
              "enum": [
                "NOT_DETECTED",
                "POSITIVE_RIF_SENSITIVE",
                "POSITIVE_RIF_RESISTANT"
              ],
              "type": "string"
            },
            "tbSputum": {
              "enum": ["NO_AFB", "POS_1", "POS_2", "POS_3"],
              "type": "string"
            }
          },
          "type": "object"
        },
        "tuberculosis": {
          "properties": {
            "status": {
              "enum": [
                "TB confirmed clinically",
                "TB confirmed by sputum",
                "TB confirmed by X-ray",
                "Currently on INH prophylaxis (IPT)",
                "Not suspected / no signs or symptoms",
                "TB suspected and referred for evaluation",
                "TB suspected and sputums sample sent or results recorded",
                "Currently on TB treatment",
                "Has completed TB treatment, no signs or symptoms",
                "Has TB (code from old CTC form)"
              ],
              "type": "string"
            },
            "tbScreening": {
              "type": "boolean"
            }
          },
          "type": "object"
        },
        "viralLoad": {
          "properties": {
            "eacDone": {
              "description": "If last VL unsuppressed",
              "type": "boolean"
            },
            "targetting": {
              "enum": ["TARGETED", "SCHEDULED"],
              "type": "string"
            },
            "tested": {
              "type": "boolean"
            },
            "viralLoadResult": {
              "description": "If not suppressed [copies/ml]",
              "minimum": 0,
              "type": "number"
            }
          },
          "type": "object"
        }
      },
      "required": ["startDatetime"],
      "type": "object"
    },
    "Practitioner": {
      "properties": {
        "firstName": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        }
      },
      "type": "object"
    }
  },
  "type": "object",
  "allOf": [
    {
      "$ref": "#/definitions/HIVCareEncounter"
    }
  ]
}
